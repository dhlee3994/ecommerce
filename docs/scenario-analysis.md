<!-- TOC -->

* [시나리오 분석](#시나리오-분석)
    * [잔액 충전/조회 API](#잔액-충전조회-api)
    * [상품 조회 API](#상품-조회-api)
    * [선착순 쿠폰 API](#선착순-쿠폰-api)
    * [주문/결제 API](#주문결제-api)
    * [상위 상품 조회 API](#상위-상품-조회-api)

<!-- TOC -->

# 시나리오 분석

## 잔액 충전/조회 API

- 잔액 충전/조회는 회원만 가능하다.
- 최소 충전 포인트는 1이상이다.
- 최대 충전 포인트이상으로 포인트를 충전할 수 없다. 단, 상품 환불로 돌려 받은 포인트는 최대 충전 포인트 이상으로 보유할 수 있다.

## 상품 조회 API

- 상품 목록, 상세 조회는 비회원/회원 모두 가능하다.
- 상품의 수량은 변동이 심하다고 가정한다.
- 상품의 그룹, 카테고리는 없다고 가정한다.

## 선착순 쿠폰 API

- 쿠폰 목록, 상세 조회는 비회원/회원 모두 가능하다.
- 쿠폰 발급은 회원만 가능하다.
- 쿠폰마다 최대 발급 가능 갯수가 정해져있다.
- 쿠폰은 상품에 적용할 수 있는 타입과 주문 전체에 적용할 수 있는 타입이 있다.
- 쿠폰의 할인 방식은 정액(정해진 금액 할인)할인과 정률(정해진 비율 할인)할인이 있다.
- 동일한 회원에 대해 중복 쿠폰 발급은 되지 않는다. 쿠폰은 1인 1매를 원칙으로 한다.

## 주문/결제 API

- 주문은 주문 시점의 가격, 재고로 주문이 이루어진다.
    - 주문 시점의 가격으로 주문 금액이 계산된다.
    - 주문 시점의 재고가 사용자가 요청한 수량보다 적으면 주문할 수 없다.
- 결제 금액 = 주문 총 금액 - 쿠폰 할인 금액
- 이미 충전된 포인트로 결제하며, 부족한 경우 결제할 수 없다.
- 결제 성공시 주문 정보를 데이터 플랫폼에 전송한다.

## 상위 상품 조회 API

- 최근 3일간 가장 많이 팔린 상위 5개의 상품 정보를 제공한다.
- 최근 3일이란 정각(00시 00분)을 기준으로 한다.
    - e.g. 2025년 1월 4일에 집계하는 상위 상품은 2025년 1월 1일 00시 00분부터 2025년 1월 4분 00시 00분까지의 판매 결과를 집계한다.
